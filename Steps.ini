
---------------------------------------------------------------------------

1. **Start**  
2. **Launch Browser (Chrome Headless)**  
3. **Login to Panel** (login_to_panel)  
4. **Click 'Inbounds'** (click_inbounds)  
5. **Search Client & Capture Screenshot** (search_client_and_capture)  
6. **Expand Inbound Rows** (expand_all_inbound_rows)  
7. **Click 'Edit Client' Button & Capture** (click_edit_client_button_and_capture)  
8. **Edit Client Window & Capture** (edit_client_window_and_capture)  
9. **Toggle 'Start After First Use'** (toggle_start_after_first_use_and_capture)  
10. **Update 'Duration' Field** (update_duration_field_by_selector)  
11. **Save Changes & Capture Screenshot** (save_changes_and_capture)  
12. **Quit Browser**  
13. **End**

---------------------------------------------------------------------------

# ------------------ Main Program ------------------
بر اساس ترتیب اجرای کد اصلی، مراحل به صورت شماره‌گذاری شده به شرح زیر است:

1. **شروع**  
2. **راه‌اندازی مرورگر (Chrome Headless)**  
3. **ورود به پنل** (با استفاده از تابع login_to_panel)  
4. **کلیک روی دکمه "Inbounds"** (تابع click_inbounds)  
5. **جستجوی کلاینت و گرفتن اسکرین‌شات نتایج جستجو** (تابع search_client_and_capture)  
6. **باز کردن زیرمجموعه‌های "Inbounds"** (تابع expand_all_inbound_rows)  
7. **کلیک روی دکمه "Edit Client" و گرفتن اسکرین‌شات** (تابع click_edit_client_button_and_capture)  
8. **ویرایش پنجره "Edit Client" و گرفتن اسکرین‌شات قبل و بعد از تغییرات** (تابع edit_client_window_and_capture)  
9. **تغییر وضعیت دکمه "Start After First Use"** (تابع toggle_start_after_first_use_and_capture)  
10. **به‌روزرسانی فیلد "Duration" و گرفتن اسکرین‌شات وضعیت به‌روز** (تابع update_duration_field_by_selector)  
11. **ذخیره تغییرات و گرفتن اسکرین‌شات نهایی** (تابع save_changes_and_capture)  
12. **بستن مرورگر**  
13. **پایان**

---------------------------------------------------------------------------

1. **شروع**  
2. **راه‌اندازی مرورگر (Chrome Headless)**  
3. **ورود به پنل** (تابع login_to_panel)  
4. **کلیک‌های "Inbounds"** (تابع click_inbounds)  
5. **جستجوی کلاینت و گرفتن اسکرین‌شات** (تابع search_client_and_capture)  
6. **باز کردن زیرمجموعه‌های "Inbounds"** (تابع expand_all_inbound_rows)  
7. **کلیک روی دکمه "Edit Client" و گرفتن اسکرین‌شات** (تابع click_edit_client_button_and_capture)  
8. **ویرایش پنجره "Edit Client" و گرفتن اسکرین‌شات** (تابع edit_client_window_and_capture)  
9. **تغییر وضعیت "Start After First Use"** (تابع toggle_start_after_first_use_and_capture)  
10. **به‌روزرسانی فیلد "Duration"** (تابع update_duration_field_by_selector)  
11. **ذخیره تغییرات و گرفتن اسکرین‌شات نهایی** (تابع save_changes_and_capture)  
12. **بستن مرورگر**  
13. **پایان**

---------------------------------------------------------------------------


---------------------------------------------------------------------------

در ادامه مراحل اجرای برنامه به صورت شماره‌گذاری‌شده و با جزئیات شرح داده شده است:

1. **شروع**  
   - برنامه آغاز به اجرا می‌کند.

2. **راه‌اندازی مرورگر (Chrome Headless)**  
   - با استفاده از تنظیمات Headless و پیکربندی‌های مربوط به Chrome، مرورگر بدون نمایش رابط گرافیکی راه‌اندازی می‌شود.

3. **ورود به پنل (تابع login_to_panel)**  
   - برنامه به نشانی مشخص شده دسترسی پیدا کرده و با استفاده از اطلاعات کاربری (مانند نام کاربری و رمز عبور) وارد پنل می‌شود.
   - پس از ورود موفق، آدرس فعلی پنل در خروجی چاپ می‌شود.

4. **کلیک‌های "Inbounds" (تابع click_inbounds)**  
   - با پیدا کردن المان «Inbounds» (مثلاً بر اساس متن موجود در آن) و کلیک روی آن، برنامه به بخش مربوط به Inbounds هدایت می‌شود.
   - پس از کلیک، آدرس صفحه به‌روزرسانی شده چاپ می‌شود.

5. **جستجوی کلاینت و گرفتن اسکرین‌شات (تابع search_client_and_capture)**  
   - در قسمت جستجو، فیلد مورد نظر با placeholder "Search" پیدا شده و شماره یا شناسه کلاینت مورد نظر (در اینجا «d50b2647-e8f6-4ea3-8bc9-6ad11b84241b») به آن وارد شده و جستجو انجام می‌شود.
   - پس از چند ثانیه، یک اسکرین‌شات کامل از نتایج جستجو گرفته و در فایل مربوطه ذخیره می‌شود.

6. **باز کردن زیرمجموعه‌های "Inbounds" (تابع expand_all_inbound_rows)**  
   - در این مرحله، برنامه تمامی دکمه‌های مربوط به باز کردن زیرمجموعه (Expand row) را پیدا و کلیک می‌کند تا جزئیات رکوردها نشان داده شود.
   - پس از پایان این عملیات، یک اسکرین‌شات کل صفحه (استیچ‌شده) گرفته و ذخیره می‌شود.

7. **کلیک روی دکمه "Edit Client" و گرفتن اسکرین‌شات (تابع click_edit_client_button_and_capture)**  
   - دکمه "Edit Client" به صورت مستقیم با استفاده از CSS Selector پیدا شده و توسط جاوااسکریپت کلیک می‌شود.
   - پس از کلیک، یک اسکرین‌شات از وضعیت جدید (صفحه یا پنجره Edit Client) گرفته می‌شود.

8. **ویرایش پنجره "Edit Client" و گرفتن اسکرین‌شات (تابع edit_client_window_and_capture)**  
   - ابتدا از وضعیت اولیه پنجره (قبل از اعمال تغییرات) یک اسکرین‌شات گرفته می‌شود.
   - سپس فیلد "Total Flow" تغییر داده می‌شود (با پاکسازی مقدار قبلی و وارد کردن مقدار جدید "7").
   - بعد از آن، دکمه "Reset Traffic" کلیک شده و یک اسکرین‌شات حین یا پس از آن عملیات گرفته می‌شود.
   - در پایان از وضعیت بعد از اعمال تغییرات یک اسکرین‌شات دیگر گرفته می‌شود.

9. **تغییر وضعیت "Start After First Use" (تابع toggle_start_after_first_use_and_capture)**  
   - برنامه دکمه مربوط به "Start After First Use" را با استفاده از CSS Selector پیدا می‌کند.
   - اگر این دکمه در حالت خاموش (غیرفعال) باشد، با کلیک آن را فعال می‌کند؛ در غیر این صورت همان حالت باقی می‌ماند.
   - پس از اعمال تغییرات، یک اسکرین‌شات از وضعیت به‌روزرسانی شده گرفته می‌شود.

10. **به‌روزرسانی فیلد "Duration" (تابع update_duration_field_by_selector)**  
    - فیلد "Duration" به صورت مستقیم از طریق سلکتور CSS پیدا شده و مقدار قبلی آن با استفاده از پاکسازی (clear و اجرای جاوااسکریپت) کاملاً حذف می‌شود.
    - سپس مقدار جدید «23» وارد می‌شود و تغییر نهایی ثبت می‌شود.
    - در پایان یک اسکرین‌شات از وضعیت به‌روز گرفته می‌شود.

11. **ذخیره تغییرات و گرفتن اسکرین‌شات نهایی (تابع save_changes_and_capture)**  
    - دکمه "Save Changes" به صورت مستقیم از طریق CSS Selector پیدا شده و کلیک می‌شود.
    - پس از کلیک و ذخیره تغییرات، یک اسکرین‌شات نهایی از وضعیت صفحه گرفته و ذخیره می‌شود.

12. **بستن مرورگر**  
    - پس از اتمام تمام عملیات و گرفتن اسکرین‌شات‌های لازم، مرورگر بسته می‌شود.

13. **پایان**  
    - برنامه با موفقیت عملیات تمدید اشتراک کاربر را به اتمام می‌رساند.

این مراحل به شما کمک می‌کند تا هر بخش از روند را به صورت دقیق و مستند دنبال کنید.

---------------------------------------------------------------------------

"Edit Client"

"Total Flow" 

"Usage"
"Reset Traffic"

"Reset Traffic
Are you sure you want to reset traffic?
Cancel     Reset"

"Reset"

"Start After First Use"

"Duration"


"Save Changes"
---------------------------------------------------------------------------

1. search_result_full.png  
   - اسکرین‌شاتی از نتایج جستجوی کلاینت در فاز جستجو (تابع search_client_and_capture).

2. inbounds_page_full_stitched.png  
   - اسکرین‌شاتی از صفحه Inbounds پس از باز شدن زیرمجموعه‌های (Expand row) مربوط به رکوردها (تابع expand_all_inbound_rows).

3. edit_client_result.png  
   - اسکرین‌شاتی که بلافاصله پس از کلیک بر روی دکمه "Edit Client" گرفته می‌شود (تابع click_edit_client_button_and_capture).

4. edit_client_before.png  
   - اسکرین‌شاتی از پنجره "Edit Client" قبل از اعمال تغییرات (در ابتدای تابع edit_client_window_and_capture).

5. reset_traffic_result.png  
   - اسکرین‌شاتی از نتیجه کلیک روی دکمه "Reset Traffic" (تابع click_reset_traffic).
   - (در صورت بروز خطا، اسکرین‌شاتی با نام reset_traffic_error.png نیز گرفته می‌شود.)

6. reset_confirm_result.png  
   - اسکرین‌شاتی از وضعیت بعد از تایید ریست ترافیک (تابع click_reset_confirmation_and_capture).
   - (در صورت بروز خطا، اسکرین‌شاتی با نام reset_confirm_error.png نیز گرفته می‌شود.)

7. edit_client_after.png  
   - اسکرین‌شاتی از پنجره "Edit Client" پس از اعمال تغییرات (بعد از تغییر مقدار "Total Flow" و کلیک روی دکمه "Reset Traffic") در تابع edit_client_window_and_capture.

8. start_after_updated.png  
   - اسکرین‌شاتی از وضعیت به‌روز شده دکمه "Start After First Use" پس از تغییر حالت آن (تابع toggle_start_after_first_use_and_capture).

9. save_changes_result.png  
   - اسکرین‌شاتی از وضعیت نهایی پس از ذخیره تغییرات با کلیک بر روی دکمه "Save Changes" (تابع save_changes_and_capture).

این فهرست به شما کمک می‌کند تا در هر مرحله بتوانید خروجی تصویری برنامه را بررسی کرده و تغییرات مورد نظر را با دقت مشاهده کنید. اگر سوال یا نیاز به توضیحات بیشتری دارید، خوشحال می‌شوم کمک کنم.

---------------------------------------------------------------------------
